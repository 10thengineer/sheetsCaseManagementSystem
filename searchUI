<!DOCTYPE html>
  <html>
    <head>
      <!--For search table-->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
     
      <!--For search table-->
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

      <!--Import Google Icon Font-->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!-- Compiled and minified CSS -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </head>

    <body>
    <div class= "container">
    
     <div class="row">


      <!--NEW-->
        <div class="col">
          <button class="btn waves-effect waves-light" id = "searchBtn">Search
             <i class="material-icons right">search</i>
          </button>
        </div>
        <div class="col">
          <button class="btn waves-effect waves-light" id = "addBtn">Add
             <i class="material-icons right">add</i>
          </button>
        </div>
       </div> <!-- ROW END-->
      <!--NEW-->

     <div class="row">

        <div class="input-field col s12">
          <i class="material-icons prefix">search</i>
          <input id="search-input" type="text" class="validate">
          <label for="search-input">Name</label>
        </div>
      
      </div><!-- END ROW-->
    
    </div> <!-- END CONTAINER-->
     
<style><!--START  TABLE CODE-->
    th{ 
        color:#fff;
            }
</style>

<table class="table table-striped">
           <tr  class="bg-info">
           <th>Name</th>
           <th>Age</th>
           <th>Birthday</th>
           </tr>

           <tbody id="myTable">
        
           </tbody>
         </table>

<script>
    //get google sheet data
// var myArray = google.script.run.getData();
// buildTable(myArray);
 google.script.run.withSuccessHandler(setArray).getData();
 //build table of entries
  var myArray = [];

 function setArray(sheetsData){
   myArray = sheetsData;
   buildTable(myArray);
 }
    


	function buildTable(tableData){
		var table = document.getElementById('myTable');
        table.innerHTML='';


		for (var i = 0; i < tableData.length; i++){
        
			var row = `<tr>
							<td>${tableData[i][0]}</td>
							<td>${tableData[i][1]}</td>
							<td>${tableData[i][2]}</td>
					  </tr>`
			table.innerHTML += row;
      }
	}

$('#search-input').on('keyup',function(){
var value = $(this).val();
var sData = searchTable(value,myArray);
//console.log(myArray);
buildTable(sData);
})
    
    function searchTable(value,data){
    var filteredData= [];
    
    for (var i = 0; i < data.length; i++){
      value = value.toLowerCase();
      var name = data[i][0].toLowerCase();
      if (name.includes(value)){
        filteredData.push(data[i]);
        }
      }
      return filteredData;
    }
    

</script> <!--END TABLE CODE-->
     
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
    /*var firstNameBox = document.getElementById("firstName");
    var lastNameBox = document.getElementById("lastName");
    var notesBox = document.getElementById("notes");
    //add here 1*/
    //document.getElementById("enterBtn").addEventListener("click",addRecord);
    document.getElementById("addBtn").addEventListener("click",addTrigger);
       
       function addTrigger(){
         google.script.run.addForm();

         }
         
    

    
    
    
    </script>
    </body>
  </html>
        
